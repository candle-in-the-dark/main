#!/usr/bin/env node
var bcrypt = require('bcryptjs');

main();

function main() {
  var factor = parseInt(process.argv[3], 10);
  if(isNaN(factor) || !(factor >= 0)) {
    throw Error("invalid WORK_FACTOR: " + factor);
  }

  var salt = bcrypt.genSaltSync(factor);
  console.log(bcrypt.hashSync(process.argv[2], salt));
}
